(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.data,o=e.handleCardClick,i=e.handleLikeClick,a=e.handleDeleteClick,c=e.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=r,this._name=r.name,this._link=r.link,this._likes=r.likes,this._cardId=r._id,this._ownerId=r.owner._id,this._userId=c,this._cardSelector=n,this._handleCardClick=o,this._handleLikeClick=i,this._handleDeleteClick=a}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photo-grid__item").cloneNode(!0)}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"_enableLike",value:function(){this._element.querySelector(".photo-grid__like").classList.add("photo-grid__like-active")}},{key:"_disableLike",value:function(){this._element.querySelector(".photo-grid__like").classList.remove("photo-grid__like-active")}},{key:"setLikes",value:function(e){this._likes=e,this._likesCounter.textContent=this._likes.length,this.isLiked()?this._enableLike():this._disableLike()}},{key:"removeLike",value:function(){this._likesCounter.textContent=this._likes.length}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._buttonCardDelete=this._element.querySelector(".photo-grid__delete"),this._buttonShowImage=this._element.querySelector(".photo-grid__show-btn"),this._buttonLike=this._element.querySelector(".photo-grid__like"),this._likesCounter=this._element.querySelector(".photo-grid__like-counter");var e=this._element.querySelector(".photo-grid__title"),t=this._element.querySelector(".photo-grid__image");return e.textContent=this._name,t.src=this._link,t.alt=this._name,this._ownerId!==this._userId&&this._buttonCardDelete.remove(),this.setLikes(this._likes),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._buttonLike.addEventListener("click",(function(){e._handleLikeClick(e._id)})),this._buttonCardDelete.addEventListener("click",(function(){e._handleDeleteClick(e._id)})),this._buttonShowImage.addEventListener("click",(function(){e._handleCardClick()}))}},{key:"removeCard",value:function(){this._element.remove()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"renderItems",value:function(e){var t=this;e.reverse().forEach((function(e){var n=t._renderer(e);t.addItem(n)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),console.log(t)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popupSelector.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popupSelector.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.addEventListener("mousedown",(function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imagePopup=document.querySelector(".popup__image"),t._imageDescription=document.querySelector(".popup__description"),t}return t=a,(n=[{key:"open",value:function(e){this._imageDescription.textContent=e.name,this._imagePopup.alt=e.name,this._imagePopup.src=e.link,u(h(a.prototype),"open",this).call(this)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handleFormSubmit=t,n._formElement=n._popupSelector.querySelector(".form"),n._inputList=n._formElement.querySelectorAll(".form__input"),n._submitButton=n._formElement.querySelector(".form__submit"),n._submitButtonText=n._submitButton.textContent,n}return t=a,(n=[{key:"loading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonText}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;y(k(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){y(k(a.prototype),"close",this).call(this),this._formElement.reset()}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function L(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupConfirmButton=n._popupSelector.querySelector(".form__submit-type-confirm"),n._handleSubmit=t,n}return t=a,(n=[{key:"submitCallBack",value:function(e){this._handleSubmit=e}},{key:"setEventListeners",value:function(){var e=this;E(j(a.prototype),"setEventListeners",this).call(this),this._popupConfirmButton.addEventListener("click",(function(t){t.preventDefault(),e._handleSubmit()}))}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about,this._avatar.src=e.avatar}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._errorList=Array.from(this._formElement.querySelectorAll(this._config.formSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.classList.add(this._config.errorClass),n.textContent=t}},{key:"_hideError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._config.inactiveButtonClass)}},{key:"_enableButton",value:function(){this._buttonElement.removeAttribute("disabled",!1),this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetErrors",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideError(t)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t){var n=t.url,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=n,this._headers=r}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"editUserInfo",value:function(e){return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._url,"cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"dislike",value:function(e){return fetch("".concat(this._url,"cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"editAvatar",value:function(e){return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._checkResponse)}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const D={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type-error",errorClass:"form__error_active"};var A=document.querySelector(".form_profile-edit"),U=document.querySelector(".form_cards-add"),V=document.querySelector(".form_avatar-edit"),N=document.querySelector(".profile__edit-btn"),J=document.querySelector(".profile__add-btn"),F=document.querySelector(".profile__avatar-btn"),G=A.querySelector(".form__input_type_name"),H=A.querySelector(".form__input_type_about"),M=(document.querySelector(".photo-grid"),document.querySelector(".profile__avatar"));function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $,K=new x({url:"https://mesto.nomoreparties.co/v1/cohort-41/",headers:{authorization:"a189a246-afb4-4f3e-9a38-c42b77769c95","Content-Type":"application/json"}});Promise.all([K.getUserInfo(),K.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];Q.setUserInfo(o),$=o._id,X.renderItems(i)})).catch((function(e){console.log("Ошибка: ".concat(e))}));var Q=new I({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__avatar"}),W=function(e){var n=new t({data:e,userId:$,handleCardClick:function(){ne.open(e)},handleLikeClick:function(){n.isLiked()?K.dislike(e._id).then((function(e){n.setLikes(e.likes)})).catch((function(e){console.log("Ошибка: ".concat(e))})):K.addLike(e._id).then((function(e){n.setLikes(e.likes)})).catch((function(e){console.log("Ошибка: ".concat(e))}))},handleDeleteClick:function(){te.open(),te.submitCallBack((function(){K.deleteCard(e._id).then((function(){te.close(),n.removeCard()})).catch((function(e){console.log("Ошибка: ".concat(e))}))}))}},".card-template");return n.generateCard()},X=new r({renderer:W},".photo-grid"),Y=new g(".popup_add",(function(e){Y.loading(!0);var t={name:e.place,link:e.link};K.addCard(t).then((function(e){X.addItem(W(e)),Y.close()})).catch((function(e){console.log("Ошибка: ".concat(e))})).finally((function(){Y.loading(!1)}))})),Z=new g(".popup_avatar",(function(e){Z.loading(!0),K.editAvatar(e).then((function(e){M.src=e.avatar,Z.close()})).catch((function(e){console.log("Ошибка: ".concat(e))})).finally((function(){Z.loading(!1)}))})),ee=new g(".popup_edit",(function(e){ee.loading(!0),K.editUserInfo(e).then((function(e){Q.setUserInfo(e),ee.close()})).catch((function(e){alert("ERROR"),console.log("Ошибка: ".concat(e))})).finally((function(){ee.loading(!1)}))})),te=new P(".popup_delete"),ne=new p(".popup_show");Y.setEventListeners(),Z.setEventListeners(),ee.setEventListeners(),ne.setEventListeners(),te.setEventListeners();var re=new T(D,A);re.enableValidation();var oe=new T(D,U);oe.enableValidation();var ie=new T(D,V);ie.enableValidation(),N.addEventListener("click",(function(){var e=Q.getUserInfo();G.value=e.name,H.value=e.about,re.resetErrors(),ee.open()})),J.addEventListener("click",(function(){oe.resetErrors(),Y.open()})),F.addEventListener("click",(function(){ie.resetErrors(),Z.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVNSLFVBR1huQixFQUFpQmhILGlCQUFpQixTQUFTLFdBQ3pDMEosR0FBa0JFLGNBQ2xCWCxFQUFZZCxXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uZmlnLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoIHtkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIHVzZXJJZH0sIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgICAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAgIC5jb250ZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkX19pdGVtJylcclxuICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlzTGlrZWQoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKGl0ZW0gPT4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2VuYWJsZUxpa2UoKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2xpa2UnKS5jbGFzc0xpc3QuYWRkKCdwaG90by1ncmlkX19saWtlLWFjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIF9kaXNhYmxlTGlrZSgpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fbGlrZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3Bob3RvLWdyaWRfX2xpa2UtYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TGlrZXMoc2V0TmV3TGlrZSkge1xyXG4gICAgICB0aGlzLl9saWtlcyA9IHNldE5ld0xpa2U7XHJcbiAgICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcblxyXG4gICAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgICB0aGlzLl9lbmFibGVMaWtlKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZUxpa2UoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUxpa2UoKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VzQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2J1dHRvbkNhcmREZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkX19kZWxldGUnKTtcclxuICAgICAgICB0aGlzLl9idXR0b25TaG93SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkX19zaG93LWJ0bicpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkX19saWtlJyk7XHJcbiAgICAgICAgdGhpcy5fbGlrZXNDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fbGlrZS1jb3VudGVyJyk7XHJcblxyXG5cclxuICAgICAgICBjb25zdCBjYXJkTmFtZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX3RpdGxlJyk7XHJcbiAgICAgICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9faW1hZ2UnKTtcclxuXHJcbiAgICAgICAgY2FyZE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgICAgICBpZih0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICAgIHRoaXMuX2J1dHRvbkNhcmREZWxldGUucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdGhpcy5zZXRMaWtlcyh0aGlzLl9saWtlcyk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fYnV0dG9uQ2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5faWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvblNob3dJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoIHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbnJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2cocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGVzY3JpcHRpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9pbWFnZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlUG9wdXAuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlUG9wdXAuc3JjID0gZGF0YS5saW5rO1xyXG5cclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc3VibWl0Jyk7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgICAgIGlmKGlzTG9hZGluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBDb25maXJtQnV0dG9uID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fc3VibWl0LXR5cGUtY29uZmlybScpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdFxyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdENhbGxCYWNrKG5ld1N1Ym1pdCkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IG5ld1N1Ym1pdDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9wb3B1cENvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICAgICAgdGhpcy5fZXJyb3JMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvL21ldGhvZCBmb3Igc2hvd2luZyBlcnJvcnNcclxuICAgIF9zaG93RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgY29uc3QgZm9ybUVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgZm9ybUVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy9tZXRob2QgZm9yIGhpZGluZyBlcnJvcnNcclxuICAgIF9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgIGNvbnN0IGZvcm1FcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgLy9tZXRob2QgZm9yIGNoZWNraW5nIHZhbGlkaXR5XHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgICAgIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgICAgPyB0aGlzLl9zaG93RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpXHJcbiAgICAgICA6IHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vZGlzYWJsZSBidXR0b24gbWV0aG9kXHJcbiAgICBfZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9lbmJhbGUgYnV0dG9uIG1ldGhvZFxyXG4gICAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vbWV0aG9kIGZvciB0b2dnbGluZyBidXR0b24gc3RhdGVcclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgdGhpcy5faGFzSW52YWxpZElucHV0KCkgPyB0aGlzLl9kaXNhYmxlQnV0dG9uKCkgOiB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvL2xpc3RlbmVyc1xyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL21ldGhvZCBmb3IgcmVzZXR0aW5nIGVycm9yc1xyXG4gICAgcmVzZXRFcnJvcnMoKSB7XHJcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vZW5hYmxlIHZhbGlkYXRpb24gbWV0aG9kXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7XHJcbiAgICAgICAgdXJsLFxyXG4gICAgICAgIGhlYWRlcnNcclxuICAgIH0pIHtcclxuICAgICAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfXVzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFVzZXJJbmZvKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfXVzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGFib3V0OiBkYXRhLmFib3V0XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDYXJkKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNhcmQoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzLyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYWRkTGlrZShpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNsaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGVkaXRBdmF0YXIoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJ9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5mb3JtX19zdWJtaXQnLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3N1Ym1pdF9kaXNhYmxlZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlLWVycm9yJyxcclxuICAgIGVycm9yQ2xhc3M6ICdmb3JtX19lcnJvcl9hY3RpdmUnXHJcbiAgfTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbmZpZzsiLCIvL2Zvcm0ncyBlbGVtZW50c1xyXG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fcHJvZmlsZS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX2NhcmRzLWFkZCcpO1xyXG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9hdmF0YXItZWRpdCcpO1xyXG4vL2J1dHRvbnNcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnRuJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkF2YXRhckVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ0bicpO1xyXG4vL2lucHV0c1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gZm9ybUVsZW1lbnRFZGl0LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGFib3V0SW5wdXQgPSBmb3JtRWxlbWVudEVkaXQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfYWJvdXQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7IiwiaW1wb3J0IENhcmQgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25maWcuanMnO1xyXG5pbXBvcnQge1xyXG4gIGZvcm1FbGVtZW50RWRpdCxcclxuICBmb3JtRWxlbWVudEFkZCxcclxuICBmb3JtRWxlbWVudEF2YXRhcixcclxuICBidXR0b25FZGl0UHJvZmlsZSxcclxuICBidXR0b25BZGRDYXJkLFxyXG4gIGJ1dHRvbkF2YXRhckVkaXQsXHJcbiAgbmFtZUlucHV0LFxyXG4gIGFib3V0SW5wdXQsXHJcbiAgYXZhdGFyLFxyXG59IGZyb20gJy4uL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzJztcclxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG4vL2NsYXNzIEFwaVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxLycsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJ2ExODlhMjQ2LWFmYjQtNGYzZS05YTM4LWM0MmI3Nzc2OWM5NScsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxubGV0IHVzZXJJZDtcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIHVzZXJDYXJkXSkgPT4ge1xyXG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyh1c2VyQ2FyZCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgfSk7XHJcblxyXG4vL2NyZWF0aW5nIHVzZXIgaW5mb3JtYXRpb24gb2JqZWN0XHJcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXHJcbiAgYWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19hYm91dCcsXHJcbiAgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fYXZhdGFyJyxcclxufSk7XHJcblxyXG4vL3JlbmRlcmluZyBjYXJkc1xyXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xyXG4gICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcclxuXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwU2hvd0ltYWdlLm9wZW4oZGF0YSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBoYW5kbGVMaWtlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBpZiAoY2FyZC5pc0xpa2VkKCkpIHtcclxuICAgICAgICAgIGFwaS5kaXNsaWtlKGRhdGEuX2lkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcGkuYWRkTGlrZShkYXRhLl9pZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQuc2V0TGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBwb3B1cERlbGV0ZS5vcGVuKCk7XHJcbiAgICAgICAgcG9wdXBEZWxldGUuc3VibWl0Q2FsbEJhY2soKCkgPT4ge1xyXG4gICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoZGF0YS5faWQpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwRGVsZXRlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIGNhcmQucmVtb3ZlQ2FyZCgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LA6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICAnLmNhcmQtdGVtcGxhdGUnXHJcbiAgKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKClcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn07XHJcblxyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oe3JlbmRlcmVyOiByZW5kZXJDYXJkfSwgJy5waG90by1ncmlkJyk7XHJcblxyXG5cclxuLy9jcmVhdGluZyBwb3B1cCBmb3IgYWRkaW5nIGNhcmRzXHJcbmNvbnN0IHBvcHVwQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9hZGQnLCAoY2FyZERhdGEpID0+IHtcclxuICBwb3B1cEFkZC5sb2FkaW5nKHRydWUpO1xyXG4gIGNvbnN0IGRhdGEgPSB7XHJcbiAgICBuYW1lOiBjYXJkRGF0YS5wbGFjZSxcclxuICAgIGxpbms6IGNhcmREYXRhLmxpbmtcclxuICB9O1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQoZGF0YSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShyZW5kZXJDYXJkKGRhdGEpKTtcclxuICAgICAgcG9wdXBBZGQuY2xvc2UoKTtcclxuICAgIH0pLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cEFkZC5sb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pXHJcbn0pO1xyXG5cclxuLy9jcmVhdGluZyBwb3B1cCBmb3IgZWRkaXRpbmcgYXZhdGFyXHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgJy5wb3B1cF9hdmF0YXInLFxyXG4gIChkYXRhKSA9PiB7XHJcbiAgICBwb3B1cEF2YXRhci5sb2FkaW5nKHRydWUpO1xyXG4gIGFwaS5lZGl0QXZhdGFyKGRhdGEpLlxyXG4gIHRoZW4oKGRhdGEpID0+IHtcclxuICAgIGF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICBwb3B1cEF2YXRhci5sb2FkaW5nKGZhbHNlKVxyXG4gIH0pXHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHBvcHVwRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICcucG9wdXBfZWRpdCcsXHJcbiAgIChkYXRhKSA9PiB7XHJcbiAgICAgcG9wdXBFZGl0LmxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpLlxyXG4gIGVkaXRVc2VySW5mbyhkYXRhKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICBwb3B1cEVkaXQuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBhbGVydCgnRVJST1InKVxyXG4gICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwRWRpdC5sb2FkaW5nKGZhbHNlKVxyXG4gICAgfSlcclxufSk7XHJcblxyXG4vL2NyZWF0aW5nIHBvcHVwIGZvciBjb25maXJtYXRpb24gZGVsZXRpbmdcclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBXaXRoU3VibWl0KCcucG9wdXBfZGVsZXRlJyk7XHJcbi8vY3JlYXRpbmcgcG9wdXAgZm9yIHNob3dpbmcgaW1hZ2VzXHJcbmNvbnN0IHBvcHVwU2hvd0ltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfc2hvdycpO1xyXG5cclxuXHJcbi8vc2V0RXZlbnRMaXN0ZW5lcnNcclxucG9wdXBBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwU2hvd0ltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuLy92YWxpZGF0aW9uIG9mIHByb2ZpbGUgZWRpdGluZ1xyXG5jb25zdCBmb3JtRWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnRFZGl0KTtcclxuZm9ybUVkaXRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy92YWxpZGF0aW9uIG9mIGFkZGluZyBjYXJkXHJcbmNvbnN0IGZvcm1BZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50QWRkKTtcclxuZm9ybUFkZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbi8vdmFsaWRhdGlvbiBvZiBlZGl0aW5nIGF2YXRhclxyXG5jb25zdCBmb3JtQXZhdGFybGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnRBdmF0YXIpO1xyXG5mb3JtQXZhdGFybGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5cclxuLy9saXN0ZW5lcnNcclxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgZ2V0UHJvZmlsZUluZm8gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBuYW1lSW5wdXQudmFsdWUgPSBnZXRQcm9maWxlSW5mby5uYW1lO1xyXG4gIGFib3V0SW5wdXQudmFsdWUgPSBnZXRQcm9maWxlSW5mby5hYm91dDtcclxuXHJcbiAgZm9ybUVkaXRWYWxpZGF0b3IucmVzZXRFcnJvcnMoKTtcclxuICBwb3B1cEVkaXQub3BlbigpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgZm9ybUFkZFZhbGlkYXRvci5yZXNldEVycm9ycygpO1xyXG4gIHBvcHVwQWRkLm9wZW4oKTtcclxufSk7XHJcblxyXG5idXR0b25BdmF0YXJFZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGZvcm1BdmF0YXJsaWRhdG9yLnJlc2V0RXJyb3JzKCk7XHJcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xyXG59KTsiXSwibmFtZXMiOlsiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsInVzZXJJZCIsInRoaXMiLCJfZGF0YSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2NhcmRJZCIsIl9pZCIsIl9vd25lcklkIiwib3duZXIiLCJfdXNlcklkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsInNvbWUiLCJpdGVtIiwiX2VsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJzZXROZXdMaWtlIiwiX2xpa2VzQ291bnRlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiaXNMaWtlZCIsIl9lbmFibGVMaWtlIiwiX2Rpc2FibGVMaWtlIiwiX2dldFRlbXBsYXRlIiwiX2J1dHRvbkNhcmREZWxldGUiLCJfYnV0dG9uU2hvd0ltYWdlIiwiX2J1dHRvbkxpa2UiLCJjYXJkTmFtZSIsImNhcmRJbWFnZSIsInNyYyIsImFsdCIsInNldExpa2VzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmV2ZXJzZSIsImZvckVhY2giLCJlbGVtZW50IiwiYWRkSXRlbSIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VQb3B1cCIsIl9pbWFnZURlc2NyaXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b25UZXh0IiwiaXNMb2FkaW5nIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoU3VibWl0IiwiaGFuZGxlU3VibWl0IiwiX3BvcHVwQ29uZmlybUJ1dHRvbiIsIl9oYW5kbGVTdWJtaXQiLCJuZXdTdWJtaXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9hYm91dCIsIl9hdmF0YXIiLCJhYm91dCIsImF2YXRhciIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9jb25maWciLCJBcnJheSIsImZyb20iLCJpbnB1dFNlbGVjdG9yIiwiX2Vycm9yTGlzdCIsImZvcm1TZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJmb3JtRXJyb3IiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNldEF0dHJpYnV0ZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIkFwaSIsInVybCIsImhlYWRlcnMiLCJfdXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1FbGVtZW50RWRpdCIsImZvcm1FbGVtZW50QWRkIiwiZm9ybUVsZW1lbnRBdmF0YXIiLCJidXR0b25FZGl0UHJvZmlsZSIsImJ1dHRvbkFkZENhcmQiLCJidXR0b25BdmF0YXJFZGl0IiwibmFtZUlucHV0IiwiYWJvdXRJbnB1dCIsImFwaSIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRVc2VySW5mbyIsImdldEluaXRpYWxDYXJkcyIsInVzZXJEYXRhIiwidXNlckNhcmQiLCJwcm9maWxlSW5mbyIsInNldFVzZXJJbmZvIiwic2VjdGlvbiIsInJlbmRlckl0ZW1zIiwiY2F0Y2giLCJlcnIiLCJyZW5kZXJDYXJkIiwiY2FyZCIsInBvcHVwU2hvd0ltYWdlIiwib3BlbiIsImRpc2xpa2UiLCJhZGRMaWtlIiwicG9wdXBEZWxldGUiLCJzdWJtaXRDYWxsQmFjayIsImRlbGV0ZUNhcmQiLCJyZW1vdmVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwicG9wdXBBZGQiLCJjYXJkRGF0YSIsImxvYWRpbmciLCJwbGFjZSIsImFkZENhcmQiLCJmaW5hbGx5IiwicG9wdXBBdmF0YXIiLCJlZGl0QXZhdGFyIiwicG9wdXBFZGl0IiwiZWRpdFVzZXJJbmZvIiwiYWxlcnQiLCJzZXRFdmVudExpc3RlbmVycyIsImZvcm1FZGl0VmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImZvcm1BZGRWYWxpZGF0b3IiLCJmb3JtQXZhdGFybGlkYXRvciIsImdldFByb2ZpbGVJbmZvIiwicmVzZXRFcnJvcnMiXSwic291cmNlUm9vdCI6IiJ9