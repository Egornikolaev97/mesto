(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=e.data,o=e.handleCardClick,i=e.handleLikeClick,a=e.handleDeleteClick,c=e.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=r,this._name=r.name,this._link=r.link,this._likes=r.likes,this._cardId=r._id,this._ownerId=r.owner._id,this._userId=c,this._cardSelector=n,this._handleCardClick=o,this._handleLikeClick=i,this._handleDeleteClick=a}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".photo-grid__item").cloneNode(!0)}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"_enableLike",value:function(){this._element.querySelector(".photo-grid__like").classList.add("photo-grid__like-active")}},{key:"_disableLike",value:function(){this._element.querySelector(".photo-grid__like").classList.remove("photo-grid__like-active")}},{key:"setLikes",value:function(e){this._likes=e,this._likesCounter.textContent=this._likes.length,this.isLiked()?this._enableLike():this._disableLike()}},{key:"removeLike",value:function(){this._likesCounter.textContent=this._likes.length}},{key:"generateCard",value:function(){this._element=this._getTemplate(),this._buttonCardDelete=this._element.querySelector(".photo-grid__delete"),this._buttonShowImage=this._element.querySelector(".photo-grid__show-btn"),this._buttonLike=this._element.querySelector(".photo-grid__like"),this._likesCounter=this._element.querySelector(".photo-grid__like-counter");var e=this._element.querySelector(".photo-grid__title"),t=this._element.querySelector(".photo-grid__image");return e.textContent=this._name,t.src=this._link,t.alt=this._name,this._ownerId!==this._userId&&this._buttonCardDelete.remove(),this.setLikes(this._likes),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._buttonLike.addEventListener("click",(function(){e._handleLikeClick(e._id)})),this._buttonCardDelete.addEventListener("click",(function(){e._handleDeleteClick(e._id)})),this._buttonShowImage.addEventListener("click",(function(){e._handleCardClick()}))}},{key:"removeCard",value:function(){this._element.remove()}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"renderItems",value:function(e){var t=this;e.reverse().forEach((function(e){var n=t._renderer(e);t.addItem(n)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),console.log(t)}var t,n;return t=e,(n=[{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popupSelector.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popupSelector.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupSelector.addEventListener("mousedown",(function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imagePopup=document.querySelector(".popup__image"),t._imageDescription=document.querySelector(".popup__description"),t}return t=a,(n=[{key:"open",value:function(e){this._imageDescription.textContent=e.name,this._imagePopup.alt=e.name,this._imagePopup.src=e.link,u(h(a.prototype),"open",this).call(this)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},y.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handleFormSubmit=t,n._formElement=n._popupSelector.querySelector(".form"),n._inputList=n._formElement.querySelectorAll(".form__input"),n._submitButton=n._formElement.querySelector(".form__submit"),n._submitButtonText=n._submitButton.textContent,n}return t=a,(n=[{key:"loading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonText}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;y(k(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){y(k(a.prototype),"close",this).call(this),this._formElement.reset()}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=C(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function L(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupConfirmButton=n._popupSelector.querySelector(".form__submit-type-confirm"),n._handleSubmit=t,n}return t=a,(n=[{key:"submitCallBack",value:function(e){this._handleSubmit=e}},{key:"setEventListeners",value:function(){var e=this;E(j(a.prototype),"setEventListeners",this).call(this),this._popupConfirmButton.addEventListener("click",(function(t){t.preventDefault(),e._handleSubmit()}))}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about,this._avatar.src=e.avatar}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._errorList=Array.from(this._formElement.querySelectorAll(this._config.formSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_showError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.classList.add(this._config.errorClass),n.textContent=t}},{key:"_hideError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_disableButton",value:function(){this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._config.inactiveButtonClass)}},{key:"_enableButton",value:function(){this._buttonElement.removeAttribute("disabled",!1),this._buttonElement.classList.remove(this._config.inactiveButtonClass)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this._disableButton():this._enableButton()}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"resetErrors",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideError(t)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t){var n=t.url,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=n,this._headers=r}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getAll",value:function(){Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"editUserInfo",value:function(e){return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._url,"cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"dislike",value:function(e){return fetch("".concat(this._url,"cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"editAvatar",value:function(e){return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._checkResponse)}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const D={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__input_type-error",errorClass:"form__error_active"};var A=document.querySelector(".form_profile-edit"),U=document.querySelector(".form_cards-add"),V=document.querySelector(".form_avatar-edit"),N=document.querySelector(".profile__edit-btn"),J=document.querySelector(".profile__add-btn"),F=(document.querySelector(".photo-grid"),A.querySelector(".form__input_type_name")),G=A.querySelector(".form__input_type_about"),H=document.querySelector(".profile__avatar-btn");function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=new T(D,A);z.enableValidation();var $=new T(D,U);$.enableValidation();var K=new T(D,V);K.enableValidation();var Q=new p(".popup_show");Q.setEventListeners();var W=new x({url:"https://mesto.nomoreparties.co/v1/cohort-41/",headers:{authorization:"a189a246-afb4-4f3e-9a38-c42b77769c95","Content-Type":"application/json"}}),X=function(e){var n=new t({data:e,userId:oe,handleCardClick:function(){Q.open(e)},handleLikeClick:function(){n.isLiked()?W.dislike(e._id).then((function(e){n.setLikes(e.likes)})).catch((function(e){console.log(e)})):W.addLike(e._id).then((function(e){n.setLikes(e.likes)})).catch((function(e){console.log(e)}))},handleDeleteClick:function(){Z.open(),Z.submitCallBack((function(){W.deleteCard(e._id).then((function(){Z.close(),n.removeCard()})).catch((function(e){console.log("Ошибка: ".concat(e))}))}))}},".card-template");return n.generateCard()},Y=new r({renderer:X},".photo-grid"),Z=new P(".popup_delete");Z.setEventListeners();var ee=new g(".popup_add",(function(e){ee.loading(!0);var t={name:e.place,link:e.link};W.addCard(t).then((function(e){Y.addItem(X(e)),ee.close()})).catch((function(e){console.log("Ошибка добавление карточки ".concat(e))})).finally((function(){ee.loading(!1)}))}));ee.setEventListeners(),J.addEventListener("click",(function(){$.resetErrors(),ee.open()}));var te=document.querySelector(".profile__avatar"),ne=new R({nameSelector:".profile__name",aboutSelector:".profile__about",avatarSelector:".profile__avatar"}),re=new g(".popup_avatar",(function(e){re.loading(!0),W.editAvatar(e).then((function(e){te.src=e.avatar,re.close()})).catch((function(e){console.log(e)})).finally((function(){re.loading(!1)}))}));re.setEventListeners(),H.addEventListener("click",(function(){K.resetErrors(),re.open()}));var oe,ie=new g(".popup_edit",(function(e){ie.loading(!0),W.editUserInfo(e).then((function(e){ne.setUserInfo(e),ie.close()})).catch((function(e){alert("ERROR"),console.log(e)})).finally((function(){ie.loading(!1)}))}));Promise.all([W.getUserInfo(),W.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ne.setUserInfo(o),oe=o._id,Y.renderItems(i)})).catch((function(e){console.log("Ошибка: ".concat(e))})),ie.setEventListeners(),N.addEventListener("click",(function(){var e=ne.getUserInfo();F.value=e.name,G.value=e.about,z.resetErrors(),ie.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixFQUFpQlYsR0FBWTdDLGNBRW5DYyxFQUFVMUUsTUFBUW1ILEVBQWVyTSxLQUNqQzZKLEVBQVczRSxNQUFRbUgsRUFBZW5HLE1BRWxDNkQsRUFBa0IyQixjQUNsQkksR0FBVXJCLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcigge2RhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgdXNlcklkfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgICAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgICAgLmNvbnRlbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2l0ZW0nKVxyXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBpc0xpa2VkKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZShpdGVtID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9lbmFibGVMaWtlKCkge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkX19saWtlJykuY2xhc3NMaXN0LmFkZCgncGhvdG8tZ3JpZF9fbGlrZS1hY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBfZGlzYWJsZUxpa2UoKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2xpa2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdwaG90by1ncmlkX19saWtlLWFjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldExpa2VzKG5ld0xpa2UpIHtcclxuICAgICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlO1xyXG4gICAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG5cclxuICAgICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgICAgdGhpcy5fZW5hYmxlTGlrZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2Rpc2FibGVMaWtlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVMaWtlKCkge1xyXG4gICAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgICAgICB0aGlzLl9idXR0b25DYXJkRGVsZXRlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fZGVsZXRlJyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uU2hvd0ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fc2hvdy1idG4nKTtcclxuICAgICAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucGhvdG8tZ3JpZF9fbGlrZScpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2xpa2UtY291bnRlcicpO1xyXG5cclxuXHJcbiAgICAgICAgY29uc3QgY2FyZE5hbWUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkX190aXRsZScpO1xyXG4gICAgICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnBob3RvLWdyaWRfX2ltYWdlJyk7XHJcblxyXG4gICAgICAgIGNhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgICAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICAgICAgaWYodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgICB0aGlzLl9idXR0b25DYXJkRGVsZXRlLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHRoaXMuc2V0TGlrZXModGhpcy5fbGlrZXMpO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2lkKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fYnV0dG9uQ2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5faWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvblNob3dJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBfaGFuZGxlQ2FyZERlbGV0ZSgpIHtcclxuICAgIC8vICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgLy8gICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gICAgLy8gfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcigge2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxucmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLnJldmVyc2UoKS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgIHRoaXMuYWRkSXRlbShlbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhwb3B1cFNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9pbWFnZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19kZXNjcmlwdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2ltYWdlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VQb3B1cC5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VQb3B1cC5zcmMgPSBkYXRhLmxpbms7XHJcblxyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19zdWJtaXQnKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgaWYoaXNMb2FkaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwQ29uZmlybUJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC10eXBlLWNvbmZpcm0nKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXRcclxuICAgIH1cclxuXHJcbiAgICBzdWJtaXRDYWxsQmFjayhuZXdTdWJtaXQpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBuZXdTdWJtaXQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBDb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLnNyYyxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1c2VySW5mbztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XHJcbiAgICAgICAgdGhpcy5fYXZhdGFyLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgIHRoaXMuX2Vycm9yTGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9jb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy9tZXRob2QgZm9yIHNob3dpbmcgZXJyb3JzXHJcbiAgICBfc2hvd0Vycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgIGNvbnN0IGZvcm1FcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vbWV0aG9kIGZvciBoaWRpbmcgZXJyb3JzXHJcbiAgICBfaGlkZUVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgICBjb25zdCBmb3JtRXJyb3IgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICAgIGZvcm1FcnJvci50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vbWV0aG9kIGZvciBjaGVja2luZyB2YWxpZGl0eVxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICAgID8gdGhpcy5fc2hvd0Vycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKVxyXG4gICAgICAgOiB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL2Rpc2FibGUgYnV0dG9uIG1ldGhvZFxyXG4gICAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vZW5iYWxlIGJ1dHRvbiBtZXRob2RcclxuICAgIF9lbmFibGVCdXR0b24oKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICAvL21ldGhvZCBmb3IgdG9nZ2xpbmcgYnV0dG9uIHN0YXRlXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICAgIHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpID8gdGhpcy5fZGlzYWJsZUJ1dHRvbigpIDogdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9saXN0ZW5lcnNcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9tZXRob2QgZm9yIHJlc2V0dGluZyBlcnJvcnNcclxuICAgIHJlc2V0RXJyb3JzKCkge1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL2VuYWJsZSB2YWxpZGF0aW9uIG1ldGhvZFxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Ioe1xyXG4gICAgICAgIHVybCxcclxuICAgICAgICBoZWFkZXJzXHJcbiAgICB9KSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja1Jlc3BvbnNlKHJlcykge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsKCkge1xyXG4gICAgICAgIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBlZGl0VXNlckluZm8oZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXRcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENhcmQoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhZGRMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2xpa2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZWRpdEF2YXRhcihkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH11c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgYXZhdGFyOiBkYXRhLmF2YXRhcn0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX3N1Ym1pdCcsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fc3VibWl0X2Rpc2FibGVkJyxcclxuICAgIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGUtZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ2Zvcm1fX2Vycm9yX2FjdGl2ZSdcclxuICB9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29uZmlnOyIsImV4cG9ydCBjb25zdCBmb3JtRWxlbWVudEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9wcm9maWxlLWVkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1FbGVtZW50QWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fY2FyZHMtYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX2F2YXRhci1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5waG90by1ncmlkJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBmb3JtRWxlbWVudEVkaXQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3QgYWJvdXRJbnB1dCA9IGZvcm1FbGVtZW50RWRpdC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfdHlwZV9hYm91dCcpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uQXZhdGFyRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItYnRuJyk7IiwiaW1wb3J0IENhcmQgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25maWcuanMnO1xyXG5pbXBvcnQge1xyXG4gIGZvcm1FbGVtZW50RWRpdCxcclxuICBmb3JtRWxlbWVudEFkZCxcclxuICBmb3JtRWxlbWVudEF2YXRhcixcclxuICBidXR0b25FZGl0UHJvZmlsZSxcclxuICBidXR0b25BZGRDYXJkLFxyXG4gIGJ1dHRvbkF2YXRhckVkaXQsXHJcbiAgbmFtZUlucHV0LFxyXG4gIGFib3V0SW5wdXQsXHJcbn0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcclxuXHJcblxyXG4vL3ZhbGlkYXRpb24gb2YgcHJvZmlsZSBlZGl0aW5nXHJcbmNvbnN0IGZvcm1FZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudEVkaXQpO1xyXG5mb3JtRWRpdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL3ZhbGlkYXRpb24gb2YgYWRkaW5nIGNhcmRcclxuY29uc3QgZm9ybUFkZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnRBZGQpO1xyXG5mb3JtQWRkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1BdmF0YXJsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudEF2YXRhcik7XHJcbmZvcm1BdmF0YXJsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTs7XHJcblxyXG4vL2NyZWF0aW5nIHBvcHVwIGZvciBzaG93aW5nIGltYWdlc1xyXG5jb25zdCBwb3B1cFNob3dJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3Nob3cnKTtcclxucG9wdXBTaG93SW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIGNsYXNzIEFwaS8vXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxLycsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJ2ExODlhMjQ2LWFmYjQtNGYzZS05YTM4LWM0MmI3Nzc2OWM5NScsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XHJcbiAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBwb3B1cFNob3dJbWFnZS5vcGVuKGRhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICBpZiAoY2FyZC5pc0xpa2VkKCkpIHtcclxuICAgICAgICAgIGFwaS5kaXNsaWtlKGRhdGEuX2lkKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC5zZXRMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgYXBpLmFkZExpa2UoZGF0YS5faWQpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkLnNldExpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBEZWxldGUub3BlbigpO1xyXG4gICAgICAgIHBvcHVwRGVsZXRlLnN1Ym1pdENhbGxCYWNrKCgpID0+IHtcclxuICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGRhdGEuX2lkKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cERlbGV0ZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgJy5jYXJkLXRlbXBsYXRlJ1xyXG4gICk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59O1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogcmVuZGVyQ2FyZFxyXG59LCAnLnBob3RvLWdyaWQnKTtcclxuXHJcblxyXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhTdWJtaXQoJy5wb3B1cF9kZWxldGUnKVxyXG5wb3B1cERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbi8vY3JlYXRpbmcgcG9wdXAgZm9yIGFkZGluZyBjYXJkc1xyXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfYWRkJywgKGNhcmREYXRhKSA9PiB7XHJcbiAgcG9wdXBBZGQubG9hZGluZyh0cnVlKTtcclxuICBjb25zdCBkYXRhID0ge1xyXG4gICAgbmFtZTogY2FyZERhdGEucGxhY2UsXHJcbiAgICBsaW5rOiBjYXJkRGF0YS5saW5rXHJcbiAgfTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKGRhdGEpXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBzZWN0aW9uLmFkZEl0ZW0ocmVuZGVyQ2FyZChkYXRhKSk7XHJcbiAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XHJcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0LTQvtCx0LDQstC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuCAke2Vycn1gKVxyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBBZGQubG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KVxyXG59KTtcclxuXHJcbnBvcHVwQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL2FkZGluZyBsaXN0ZW5lciBmb3Igb3BlbiBwb3B1cCB3aXRoIGFkZCBjYXJkIGZvcm1cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBmb3JtQWRkVmFsaWRhdG9yLnJlc2V0RXJyb3JzKCk7XHJcbiAgcG9wdXBBZGQub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKVxyXG5cclxuXHJcbi8vY3JlYXRpbmcgdXNlciBpbmZvcm1hdGlvbiBvYmplY3RcclxuY29uc3QgcHJvZmlsZUluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcclxuICBhYm91dFNlbGVjdG9yOiAnLnByb2ZpbGVfX2Fib3V0JyxcclxuICBhdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInLFxyXG59KTtcclxuXHJcblxyXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICcucG9wdXBfYXZhdGFyJyxcclxuICAoZGF0YSkgPT4ge1xyXG4gICAgcG9wdXBBdmF0YXIubG9hZGluZyh0cnVlKTtcclxuICBhcGkuZWRpdEF2YXRhcihkYXRhKS5cclxuICB0aGVuKChkYXRhKSA9PiB7XHJcbiAgICBhdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycilcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHtcclxuICAgIHBvcHVwQXZhdGFyLmxvYWRpbmcoZmFsc2UpXHJcbiAgfSlcclxufVxyXG4pXHJcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5idXR0b25BdmF0YXJFZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGZvcm1BdmF0YXJsaWRhdG9yLnJlc2V0RXJyb3JzKCk7XHJcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xyXG59KVxyXG5cclxuY29uc3QgcG9wdXBFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgJy5wb3B1cF9lZGl0JyxcclxuICAgKGRhdGEpID0+IHtcclxuICAgICBwb3B1cEVkaXQubG9hZGluZyh0cnVlKTtcclxuICBhcGkuXHJcbiAgZWRpdFVzZXJJbmZvKGRhdGEpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICAgIHBvcHVwRWRpdC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGFsZXJ0KCdFUlJPUicpXHJcbiAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwRWRpdC5sb2FkaW5nKGZhbHNlKVxyXG4gICAgfSlcclxufSk7XHJcblxyXG5sZXQgdXNlcklkO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIHVzZXJDYXJkXSkgPT4ge1xyXG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyh1c2VyQ2FyZCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsDogJHtlcnJ9YCk7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5wb3B1cEVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vYWRkaW5nIGxpc3RlbmVyIGZvciBvcGVuIHBvcHVwIHdpdGggZWRpdCBmb3JtXHJcbmJ1dHRvbkVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IGdldFByb2ZpbGVJbmZvID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgbmFtZUlucHV0LnZhbHVlID0gZ2V0UHJvZmlsZUluZm8ubmFtZTtcclxuICBhYm91dElucHV0LnZhbHVlID0gZ2V0UHJvZmlsZUluZm8uYWJvdXQ7XHJcblxyXG4gIGZvcm1FZGl0VmFsaWRhdG9yLnJlc2V0RXJyb3JzKCk7XHJcbiAgcG9wdXBFZGl0Lm9wZW4oKTtcclxufSk7Il0sIm5hbWVzIjpbIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJ1c2VySWQiLCJ0aGlzIiwiX2RhdGEiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXJJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzb21lIiwiaXRlbSIsIl9lbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibmV3TGlrZSIsIl9saWtlc0NvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsImlzTGlrZWQiLCJfZW5hYmxlTGlrZSIsIl9kaXNhYmxlTGlrZSIsIl9nZXRUZW1wbGF0ZSIsIl9idXR0b25DYXJkRGVsZXRlIiwiX2J1dHRvblNob3dJbWFnZSIsIl9idXR0b25MaWtlIiwiY2FyZE5hbWUiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJzZXRMaWtlcyIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJldmVyc2UiLCJmb3JFYWNoIiwiZWxlbWVudCIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiY29uc29sZSIsImxvZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlUG9wdXAiLCJfaW1hZ2VEZXNjcmlwdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsImlzTG9hZGluZyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlBvcHVwV2l0aFN1Ym1pdCIsImhhbmRsZVN1Ym1pdCIsIl9wb3B1cENvbmZpcm1CdXR0b24iLCJfaGFuZGxlU3VibWl0IiwibmV3U3VibWl0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfYWJvdXQiLCJfYXZhdGFyIiwiYWJvdXQiLCJhdmF0YXIiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiQXJyYXkiLCJmcm9tIiwiaW5wdXRTZWxlY3RvciIsIl9lcnJvckxpc3QiLCJmb3JtU2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZm9ybUVycm9yIiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzZXRBdHRyaWJ1dGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJBcGkiLCJ1cmwiLCJoZWFkZXJzIiwiX3VybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZvcm1FbGVtZW50RWRpdCIsImZvcm1FbGVtZW50QWRkIiwiZm9ybUVsZW1lbnRBdmF0YXIiLCJidXR0b25FZGl0UHJvZmlsZSIsImJ1dHRvbkFkZENhcmQiLCJuYW1lSW5wdXQiLCJhYm91dElucHV0IiwiYnV0dG9uQXZhdGFyRWRpdCIsImZvcm1FZGl0VmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImZvcm1BZGRWYWxpZGF0b3IiLCJmb3JtQXZhdGFybGlkYXRvciIsInBvcHVwU2hvd0ltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwicmVuZGVyQ2FyZCIsImNhcmQiLCJvcGVuIiwiZGlzbGlrZSIsImNhdGNoIiwiZXJyIiwiYWRkTGlrZSIsInBvcHVwRGVsZXRlIiwic3VibWl0Q2FsbEJhY2siLCJkZWxldGVDYXJkIiwicmVtb3ZlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsInNlY3Rpb24iLCJwb3B1cEFkZCIsImNhcmREYXRhIiwibG9hZGluZyIsInBsYWNlIiwiYWRkQ2FyZCIsImZpbmFsbHkiLCJyZXNldEVycm9ycyIsInByb2ZpbGVJbmZvIiwicG9wdXBBdmF0YXIiLCJlZGl0QXZhdGFyIiwicG9wdXBFZGl0IiwiZWRpdFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJhbGVydCIsInVzZXJEYXRhIiwidXNlckNhcmQiLCJyZW5kZXJJdGVtcyIsImdldFByb2ZpbGVJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==